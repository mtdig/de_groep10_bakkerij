<section class="cart-section">
    <div class="container">
        <h1>{{ t.cart }}</h1>
        
        {% if cartItems|length > 0 %}
            <div class="cart-items" id="cart-items-list">
                {% for item in cartItems %}
                <div class="cart-item" id="cart-item-{{ item.product.id }}">
                    <img src="/img/{{ item.product.image }}" alt="{{ item.product.nameNl }}">
                    <div class="cart-item-details">
                        <h3>{% if lang == 'nl' %}{{ item.product.nameNl }}{% elif lang == 'fr' %}{{ item.product.nameFr }}{% elif lang == 'en' %}{{ item.product.nameEn }}{% elif lang == 'de' %}{{ item.product.nameDe }}{% elif lang == 'es' %}{{ item.product.nameEs }}{% elif lang == 'zh' %}{{ item.product.nameZh }}{% else %}{{ item.product.nameNl }}{% endif %}</h3>
                        <p class="cart-item-price">€{{ "%.2f"|format(item.product.price) }}</p>
                    </div>
                    <div class="cart-item-quantity">
                        <form id="form-{{ item.product.id }}">
                            <input type="number" value="{{ item.quantity }}" min="1" max="99" 
                                   class="quantity-input"
                                   id="quantity-{{ item.product.id }}"
                                   name="quantity">
                            <button type="button" class="refresh-btn"
                                    hx-post="/cart/update/{{ item.product.id }}?lang={{ lang }}"
                                    hx-include="#form-{{ item.product.id }}"
                                    hx-target="closest .cart-section"
                                    hx-swap="outerHTML"
                                    aria-label="{{ t.refresh }}">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="23 4 23 10 17 10"></polyline>
                                    <polyline points="1 20 1 14 7 14"></polyline>
                                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                                </svg>
                            </button>
                        </form>
                    </div>
                    <div class="cart-item-subtotal">
                        <span>€{{ "%.2f"|format(item.subtotal) }}</span>
                    </div>
                    <button class="remove-btn" 
                            hx-delete="/cart/remove/{{ item.product.id }}"
                            hx-target="closest .cart-section"
                            hx-swap="outerHTML"
                            aria-label="{{ t.remove }}">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                </div>
                {% endfor %}
            </div>
            
            <div class="cart-total">
                <div class="total-row">
                    <span class="total-label">{{ t.total }}</span>
                    <span class="total-amount">€{{ "%.2f"|format(total) }}</span>
                </div>
                <a href="/pickup?lang={{ lang }}" 
                   hx-get="/pickup?lang={{ lang }}"
                   hx-target="#main-content"
                   hx-swap="innerHTML"
                   hx-push-url="true"
                   class="checkout-btn">
                    {{ t.place_order }}
                </a>
            </div>
        {% else %}
            <div class="empty-cart">
                <svg class="empty-cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <h2>{{ t.cart_empty }}</h2>
                <a href="/products?lang={{ lang }}" class="cta-button">
                    {{ t.go_shopping }}
                </a>
            </div>
        {% endif %}
    </div>
</section>
